<template>
    <div style="padding-top: calc((100vh - 70vh)/2)">
        <audio id="audiofile" :src="linkAudio" controls autoplay></audio><br>
        <button class="btn-start" v-on:click='start_session()'>Start Session</button>
       <!--  <button v-on:click='sendDataCall({type: "store_user"}, "Childish")'>Send call</button>
        <button v-on:click='sendDataScreen({type: "store_user"}, "screen")'>Send screen</button>
        <button v-on:click='screenShare()'>share screen</button> -->
        <h1 class="circle">
            <div id="titleBox">
            </div>
            <svg width="500" height="500" viewBox="0 0 500 500" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path id="hair" d="M254.07 167.395L252.573 167.498L254.07 167.395ZM261.009 156.956C261.595 157.542 262.544 157.542 263.13 156.956C263.716 156.37 263.716 155.42 263.13 154.834L261.009 156.956ZM250.668 158.729C251.497 158.729 252.168 158.058 252.168 157.229C252.168 156.401 251.497 155.729 250.668 155.729L250.668 158.729ZM256 175.5C254.573 175.038 254.573 175.038 254.573 175.037C254.573 175.037 254.574 175.036 254.574 175.035C254.574 175.034 254.574 175.033 254.575 175.032C254.575 175.031 254.576 175.029 254.576 175.027C254.577 175.024 254.578 175.022 254.579 175.02C254.58 175.016 254.581 175.014 254.581 175.013C254.581 175.013 254.581 175.015 254.58 175.017C254.569 175.041 254.584 174.996 254.645 174.921C254.664 174.898 254.972 174.501 255.584 174.494C256.266 174.487 256.577 174.957 256.584 174.968C256.613 175.01 256.562 174.945 256.472 174.638C256.389 174.352 256.292 173.925 256.188 173.307C255.981 172.072 255.765 170.17 255.566 167.292L252.573 167.498C252.775 170.42 252.999 172.431 253.229 173.803C253.344 174.489 253.464 175.039 253.592 175.477C253.713 175.893 253.866 176.297 254.085 176.627C254.284 176.926 254.773 177.503 255.617 177.494C256.389 177.486 256.839 176.978 256.977 176.808C257.156 176.587 257.266 176.36 257.32 176.238C257.351 176.167 257.376 176.106 257.393 176.06C257.402 176.036 257.409 176.016 257.414 176C257.417 175.991 257.42 175.984 257.422 175.978C257.423 175.975 257.424 175.972 257.425 175.969C257.425 175.968 257.426 175.966 257.426 175.965C257.426 175.964 257.426 175.964 257.427 175.963C257.427 175.962 257.427 175.962 256 175.5ZM255.566 167.292C255.182 161.72 256.532 158.741 257.878 157.433C259.214 156.134 260.465 156.412 261.009 156.956L263.13 154.834C261.174 152.878 258.025 153.106 255.787 155.282C253.557 157.449 252.157 161.47 252.573 167.498L255.566 167.292ZM254.128 169.887C249.917 166.219 248.765 163.157 248.792 161.281C248.818 159.418 249.899 158.729 250.668 158.729L250.668 155.729C247.902 155.729 245.836 158.117 245.792 161.239C245.748 164.348 247.601 168.18 252.158 172.149L254.128 169.887Z" fill="black" />
                <g id="body" ref="body">
                    <path d="M329 246C329 204.579 295.421 171 254 171C212.579 171 179 204.579 179 246V321C179 334.807 190.193 346 204 346C213.765 346 222.161 339.214 230.348 332.598C233.737 329.859 237.091 327.149 240.49 324.961C244.386 322.454 249.023 321 254 321C258.977 321 263.614 322.454 267.51 324.961C270.909 327.149 274.263 329.859 277.652 332.598C285.839 339.214 294.235 346 304 346C317.807 346 329 334.807 329 321V246Z" fill="#FBB03B" />
                    <path d="M303 249.66C300.238 244.877 301.877 238.761 306.66 236L315.32 231C320.103 228.239 326.219 229.877 328.981 234.66L356.481 282.292C360.623 289.466 358.165 298.64 350.99 302.782C343.816 306.924 334.642 304.466 330.5 297.292L303 249.66Z" fill="#FBB03B" />
                    <path d="M179 234.66C181.761 229.877 187.877 228.239 192.66 231L201.32 236C206.103 238.761 207.742 244.877 204.981 249.66L177.481 297.292C173.339 304.466 164.165 306.924 156.99 302.782C149.816 298.64 147.358 289.466 151.5 282.292L179 234.66Z" fill="#FBB03B" />
                    <path id="neTear" d="M217.003 253.499C217.003 255.489 216.213 257.396 214.807 258.803C213.4 260.21 211.492 261 209.503 261C207.514 261 205.606 260.21 204.199 258.803C202.792 257.396 202.002 255.489 202.002 253.499C202.002 249.357 209.503 241 209.503 241C209.503 241 217.003 249.357 217.003 253.499Z" fill="#FBB03B" />
                </g>
                <!--> Paths for neutral emotion
                <!-->
                <g id="natural">
                    <path id="nelo" d="M246 223C246 232.941 237.941 241 228 241C218.059 241 210 232.941 210 223C210 213.059 218.059 205 228 205C237.941 205 246 213.059 246 223Z" fill="white" />
                    <path id="neli" d="M238 223C238 228.523 233.523 233 228 233C222.477 233 218 228.523 218 223C218 217.477 222.477 213 228 213C233.523 213 238 217.477 238 223Z" fill="black" />
                    <path id="nero" d="M298 223C298 232.941 289.941 241 280 241C270.059 241 262 232.941 262 223C262 213.059 270.059 205 280 205C289.941 205 298 213.059 298 223Z" fill="white" />
                    <path id="neri" d="M290 223C290 228.523 285.523 233 280 233C274.477 233 270 228.523 270 223C270 217.477 274.477 213 280 213C285.523 213 290 217.477 290 223Z" fill="black" />
                    <path id="nem1" d="M256.072 265C251.972 265 248.159 264.747 244.875 264.407C238.849 263.808 232.873 262.717 227 261.144L227.54 259C227.834 259.083 256.928 267.421 280.346 259L281 261.112C272.757 264.082 263.889 265 256.072 265Z" fill="black" />
                    <path id="nem2" d="M256.072 265C251.972 265 248.159 264.747 244.875 264.407C238.849 263.808 232.873 262.717 227 261.144L227.54 259C227.834 259.083 256.928 267.421 280.346 259L281 261.112C272.757 264.082 263.889 265 256.072 265Z" fill="black" />
                    <path id="nem3" d="M256.072 265C251.972 265 248.159 264.747 244.875 264.407C238.849 263.808 232.873 262.717 227 261.144L227.54 259C227.834 259.083 256.928 267.421 280.346 259L281 261.112C272.757 264.082 263.889 265 256.072 265Z" fill="black" />
                </g>
                <!--> Paths for angry emotion
                <!-->
                <g id="angry">
                    <path id="aelo" d="M210 223C210 215.925 214.082 209.803 220.019 206.861L245.63 219.351C245.873 220.529 246 221.75 246 223C246 226.428 245.042 229.633 243.378 232.36C240.218 230.345 234.513 229 228 229C221.487 229 215.782 230.345 212.622 232.36C210.958 229.633 210 226.428 210 223Z" fill="white" />
                    <path id="aeli" d="M235.485 229.632C237.05 227.867 238 225.544 238 223C238 217.477 233.523 213 228 213C222.477 213 218 217.477 218 223C218 225.544 218.95 227.867 220.515 229.632C222.795 229.226 225.329 229 228 229C230.671 229 233.205 229.226 235.485 229.632Z" fill="black" />
                    <path id="aero" d="M262 223C262 221.75 262.127 220.529 262.37 219.351L287.981 206.861C293.918 209.803 298 215.925 298 223C298 226.428 297.042 229.633 295.378 232.36C292.218 230.345 286.513 229 280 229C273.487 229 267.782 230.345 264.622 232.36C262.958 229.633 262 226.428 262 223Z" fill="white" />
                    <path id="aeri" d="M287.485 229.632C289.05 227.867 290 225.544 290 223C290 217.477 285.523 213 280 213C274.477 213 270 217.477 270 223C270 225.544 270.95 227.867 272.515 229.632C274.795 229.226 277.329 229 280 229C282.671 229 285.205 229.226 287.485 229.632Z" fill="black" />
                    <path id="anm1" d="M251.108 259C266.955 259 280.794 268.103 281 268.242L279.814 270C279.514 269.799 249.658 250.192 228.453 269.898L227 268.349C234.543 261.335 243.083 259 251.108 259Z" fill="black" />
                    <path id="anm2" d="M251.108 259C266.955 259 280.794 268.103 281 268.242L279.814 270C279.514 269.799 249.658 250.192 228.453 269.898L227 268.349C234.543 261.335 243.083 259 251.108 259Z" fill="black" />
                    <path id="anm3" d="M251.108 259C266.955 259 280.794 268.103 281 268.242L279.814 270C279.514 269.799 249.658 250.192 228.453 269.898L227 268.349C234.543 261.335 243.083 259 251.108 259Z" fill="black" />
                </g>
                <!--> Paths for surprised emotion
                <!-->
                <g id="surprised">
                    <path id="selo" d="M246 223C246 232.941 237.941 241 228 241C218.059 241 210 232.941 210 223C210 213.059 218.059 205 228 205C237.941 205 246 213.059 246 223Z" fill="white" />
                    <path id="seli" d="M240 223C240 229.627 234.627 235 228 235C221.373 235 216 229.627 216 223C216 216.373 221.373 211 228 211C234.627 211 240 216.373 240 223Z" fill="black" />
                    <path id="sero" d="M298 223C298 232.941 289.941 241 280 241C270.059 241 262 232.941 262 223C262 213.059 270.059 205 280 205C289.941 205 298 213.059 298 223Z" fill="white" />
                    <path id="seri" d="M292 223C292 229.627 286.627 235 280 235C273.373 235 268 229.627 268 223C268 216.373 273.373 211 280 211C286.627 211 292 216.373 292 223Z" fill="black" />
                    <path id="sum1" d="M253.963 284C244.611 284 237 278.393 237 271.5C237 264.607 244.611 259 253.963 259C263.315 259 270.926 264.607 270.926 271.524C270.926 278.442 263.315 284 253.963 284Z" fill="black" />
                    <path id="sum2" d="M241.263 275.698C245 272.886 254.416 267.783 267.061 275.084C264.976 278.631 259.89 281.14 253.963 281.14C248.385 281.14 243.551 278.917 241.263 275.698Z" fill="black" />
                    <path id="sum3" d="M253.963 261.855C248.861 261.855 244.382 263.717 241.904 266.499H266.023C263.545 263.717 259.065 261.855 253.963 261.855Z" fill="white" />
                </g>
                <!--> Paths for sad emotion
                <!-->
                <g id="sad">
                    <path id="saero" d="M294.915 233.08C291.679 231.221 286.206 230 280 230C273.794 230 268.321 231.221 265.085 233.08C263.138 230.204 262 226.735 262 223C262 217.272 264.676 212.169 268.845 208.872C271.113 211.848 276.592 214.941 283.387 216.761C288.695 218.184 293.696 218.532 297.276 217.928C297.747 219.537 298 221.239 298 223C298 226.735 296.862 230.204 294.915 233.08Z" fill="white" />
                    <path id="saelo" d="M238.768 208.575C236.648 211.64 231.032 214.88 224.01 216.761C218.982 218.109 214.229 218.493 210.699 218.016C210.244 219.599 210 221.271 210 223C210 226.735 211.138 230.204 213.085 233.08C216.321 231.221 221.794 230 228 230C234.206 230 239.679 231.222 242.915 233.08C244.862 230.204 246 226.735 246 223C246 217.097 243.158 211.857 238.768 208.575Z" fill="white" />
                    <path id="saeli" d="M217.067 218.047C216.382 219.557 216 221.234 216 223C216 226.043 217.133 228.821 218.999 230.937C221.647 230.341 224.721 230 228 230C231.279 230 234.353 230.341 237.001 230.937C238.867 228.821 240 226.043 240 223C240 218.578 237.609 214.715 234.048 212.634C231.374 214.253 227.909 215.717 224.01 216.761C221.597 217.408 219.248 217.833 217.067 218.047Z" fill="black" />
                    <path id="saeri" d="M289.001 230.937C286.353 230.341 283.279 230 280 230C276.721 230 273.647 230.341 270.999 230.937C269.133 228.821 268 226.043 268 223C268 218.704 270.258 214.935 273.652 212.815C276.282 214.362 279.634 215.756 283.387 216.761C286.033 217.471 288.603 217.913 290.959 218.103C291.628 219.598 292 221.256 292 223C292 226.043 290.867 228.821 289.001 230.937Z" fill="black" />
                    <path id="sadTear" d="M217.003 253.499C217.003 255.489 216.213 257.396 214.807 258.803C213.4 260.21 211.492 261 209.503 261C207.514 261 205.606 260.21 204.199 258.803C202.792 257.396 202.002 255.489 202.002 253.499C202.002 249.357 209.503 241 209.503 241C209.503 241 217.003 249.357 217.003 253.499Z" fill="white" />
                    <path id="sm1" d="M251.108 259C266.955 259 280.794 268.103 281 268.242L279.814 270C279.514 269.799 249.658 250.192 228.453 269.898L227 268.349C234.543 261.335 243.083 259 251.108 259Z" fill="black" />
                    <path id="sm2" d="M251.108 259C266.955 259 280.794 268.103 281 268.242L279.814 270C279.514 269.799 249.658 250.192 228.453 269.898L227 268.349C234.543 261.335 243.083 259 251.108 259Z" fill="black" />
                    <path id="sm3" d="M251.108 259C266.955 259 280.794 268.103 281 268.242L279.814 270C279.514 269.799 249.658 250.192 228.453 269.898L227 268.349C234.543 261.335 243.083 259 251.108 259Z" fill="black" />
                </g>
                <!--> Paths for happy emotion
                <!-->
                <g id="happy">
                    <path id="helo" d="M246 223C246 232.941 237.941 241 228 241C218.059 241 210 232.941 210 223C210 213.059 218.059 205 228 205C237.941 205 246 213.059 246 223Z" fill="white" />
                    <path id="heli" d="M238 223C238 228.523 233.523 233 228 233C222.477 233 218 228.523 218 223C218 217.477 222.477 213 228 213C233.523 213 238 217.477 238 223Z" fill="black" />
                    <path id="hero" d="M298 223C298 232.941 289.941 241 280 241C270.059 241 262 232.941 262 223C262 213.059 270.059 205 280 205C289.941 205 298 213.059 298 223Z" fill="white" />
                    <path id="heri" d="M290 223C290 228.523 285.523 233 280 233C274.477 233 270 228.523 270 223C270 217.477 274.477 213 280 213C285.523 213 290 217.477 290 223Z" fill="black" />
                    <path id="hm1" d="M254.501 289C240.43 289 233.684 281.197 230.513 274.657C227.114 267.645 227.01 260.745 227.01 260.458L227 259.216L228.219 259.483C239.325 261.916 248.757 262.727 256.392 262.727C271.454 262.727 279.523 259.575 279.636 259.534L280.959 259L281 260.417C281.01 260.951 281.258 273.63 273.066 281.998C268.52 286.639 262.27 289 254.501 289Z" fill="black" />
                    <path id="hm2" d="M230.213 268.158H278.081C278.703 265.505 278.915 263.215 278.985 261.844C276.992 262.47 272.89 263.548 266.743 264.195C258.84 265.027 245.968 265.242 229.066 261.68C229.179 263.046 229.469 265.411 230.213 268.158Z" fill="white" />
                    <path id="hm3" d="M268.214 283.426C256.057 274.639 244.478 280.917 240.69 283.474C244.47 285.838 249.083 287.029 254.501 287.029C259.902 287.029 264.498 285.819 268.214 283.426Z" fill="#D85B5B" />
                </g>
                <!--> Paths for afraid emotion
                <!-->
                <g id="afraid">
                    <path id="afero" d="M268.845 208.872C264.676 212.169 262 217.272 262 223C262 232.941 270.059 241 280 241C289.941 241 298 232.941 298 223C298 221.239 297.747 219.537 297.276 217.928C293.696 218.532 288.695 218.184 283.387 216.761C276.592 214.941 271.113 211.848 268.845 208.872Z" fill="white" />
                    <path id="aferi" d="M275.755 213.943C272.355 215.54 270 218.995 270 223C270 228.523 274.477 233 280 233C285.523 233 290 228.523 290 223C290 221.109 289.475 219.34 288.563 217.832C286.899 217.592 285.16 217.237 283.387 216.761C280.572 216.007 277.983 215.035 275.755 213.943Z" fill="black" />
                    <path id="afelo" d="M238.768 208.575C236.648 211.64 231.032 214.88 224.01 216.761C218.982 218.109 214.229 218.493 210.699 218.016C210.244 219.599 210 221.271 210 223C210 232.941 218.059 241 228 241C237.941 241 246 232.941 246 223C246 217.097 243.158 211.857 238.768 208.575Z" fill="white" />
                    <path id="afeli" d="M219.499 217.731C218.549 219.261 218 221.066 218 223C218 228.523 222.477 233 228 233C233.523 233 238 228.523 238 223C238 218.872 235.498 215.327 231.928 213.801C229.636 214.951 226.946 215.975 224.01 216.762C222.472 217.174 220.959 217.496 219.499 217.731Z" fill="black" />
                    <path id="afm1" d="M254 269.846C239.111 269.846 227 275.451 227 269.957C227 264.463 239.111 259.989 254 259.989C268.889 259.989 281 264.459 281 269.957C281 275.456 268.889 269.846 254 269.846Z" fill="black" />
                    <path id="afm2" d="M254.543 259.991C254.536 259.99 254.529 259.989 254.523 259.989L254.33 259.98C254.188 259.982 254.046 259.985 253.905 259.989C253.937 259.989 253.968 259.989 254 259.989C254.181 259.989 254.362 259.989 254.543 259.991Z" fill="black" />
                    <path id="afm3" d="M273.652 266.241C269.82 263.875 262.448 262.269 254 262.269C245.552 262.269 238.18 263.875 234.348 266.241H273.652Z" fill="white" />
                </g>
                <!--> Paths for disgust emotion
                <!-->
                <g id="disgust">
                    <path id="diero" d="M294.915 233.08C291.679 231.221 286.206 230 280 230C273.794 230 268.321 231.221 265.085 233.08C263.138 230.204 262 226.735 262 223C262 217.272 264.676 212.169 268.845 208.872C271.113 211.848 276.592 214.941 283.387 216.761C288.695 218.184 293.696 218.532 297.276 217.928C297.747 219.537 298 221.239 298 223C298 226.735 296.862 230.204 294.915 233.08Z" fill="white" />
                    <path id="dielo" d="M238.768 208.575C236.648 211.64 231.032 214.88 224.01 216.761C218.982 218.109 214.229 218.493 210.699 218.016C210.244 219.599 210 221.271 210 223C210 226.735 211.138 230.204 213.085 233.08C216.321 231.221 221.794 230 228 230C234.206 230 239.679 231.222 242.915 233.08C244.862 230.204 246 226.735 246 223C246 217.097 243.158 211.857 238.768 208.575Z" fill="white" />
                    <path id="dieli" d="M217.067 218.047C216.382 219.557 216 221.234 216 223C216 226.043 217.133 228.821 218.999 230.937C221.647 230.341 224.721 230 228 230C231.279 230 234.353 230.341 237.001 230.937C238.867 228.821 240 226.043 240 223C240 218.578 237.609 214.715 234.048 212.634C231.374 214.253 227.909 215.717 224.01 216.761C221.597 217.408 219.248 217.833 217.067 218.047Z" fill="black" />
                    <path id="dieri" d="M289.001 230.937C286.353 230.341 283.279 230 280 230C276.721 230 273.647 230.341 270.999 230.937C269.133 228.821 268 226.043 268 223C268 218.704 270.258 214.935 273.652 212.815C276.282 214.362 279.634 215.756 283.387 216.761C286.033 217.471 288.603 217.913 290.959 218.103C291.628 219.598 292 221.256 292 223C292 226.043 290.867 228.821 289.001 230.937Z" fill="black" />
                    <path id="dim1" d="M254 269.846C239.111 269.846 227 275.451 227 269.957C227 264.463 239.111 259.989 254 259.989C268.889 259.989 281 264.459 281 269.957C281 275.456 268.889 269.846 254 269.846Z" fill="black" />
                    <path id="dim2" d="M273.652 266.241C269.82 263.875 262.448 262.269 254 262.269C245.552 262.269 238.18 263.875 234.348 266.241H273.652Z" fill="white" />
                    <path id="dim3" d="M243 266.241H265V273C265 279.075 260.075 284 254 284C247.925 284 243 279.075 243 273V266.241Z" fill="#D85B5B" />
                </g>
                <!--> Paths for mouth shape A
                <!-->
                <g id="mouthA">
                    <path id="ma1" d="M279 261H229V262.627H279V261Z" fill="black" />
                    <path id="ma2" d="M279 261H229V262.627H279V261Z" fill="black" />
                    <path id="ma3" d="M279 261H229V262.627H279V261Z" fill="black" />
                </g>
                <!--> Paths for mouth shape B
                <!-->
                <g id="mouthB">
                    <path id="mb1" d="M254.392 276.417C244.332 276.417 236.874 274.055 232.211 269.392C228.643 265.824 228.151 262.236 228.131 262.085L228 261H280L279.93 262.035C279.92 262.186 279.628 265.794 276.231 269.372C271.809 274.045 264.452 276.417 254.392 276.417Z" fill="black" />
                    <path id="mb2" d="M254.392 274.487C245.151 274.487 238.025 272.322 233.772 268.226H274.656C270.642 272.325 263.638 274.487 254.392 274.487Z" fill="white" />
                    <path id="mb3" d="M230.332 262.93C230.604 263.762 231.13 264.988 232.108 266.327H276.207C277.114 264.977 277.565 263.747 277.789 262.93H230.332Z" fill="white" />
                </g>
                <!--> Paths for mouth shape C
                <!-->
                <g id="mouthC">
                    <path id="mc1" fill-rule="evenodd" clip-rule="evenodd" d="M231.395 268.747C236.225 273.004 243.972 275.165 254.406 275.165C264.85 275.165 272.477 273.004 277.066 268.738C280.603 265.442 280.917 262.099 280.926 261.96L281 261H227L227.148 262.006C227.166 262.145 227.674 265.469 231.395 268.747Z" fill="black" />
                    <path id="mc2" d="M229.198 262.773C229.486 263.535 230.035 264.647 231.047 265.866H277.285C278.221 264.642 278.695 263.526 278.932 262.773H229.198Z" fill="white" />
                    <path id="mc3" d="M271.559 270.299H237.054C242.437 272.798 249.162 273.401 254.406 273.401C259.649 273.401 266.338 272.797 271.559 270.299Z" fill="white" />
                </g>
                <!--> Paths for mouth shape D
                <!-->
                <g id="mouthD">
                    <path id="md1" fill-rule="evenodd" clip-rule="evenodd" d="M230.574 271.384C236.337 280.36 246.77 282.24 254.496 282.24C263.575 282.24 270.526 279.803 275.154 275.01C281.217 268.73 281 260.756 280.99 260.415L280.938 259L279.637 259.527C279.635 259.527 279.624 259.531 279.604 259.539C279.176 259.698 274.624 261.395 266.426 262.254C258.493 263.08 245.427 263.276 228.219 259.475L227 259.207L227.01 260.456C227.011 260.462 227.011 260.471 227.011 260.484C227.028 260.956 227.212 266.141 230.574 271.384Z" fill="black" />
                    <path id="md2" d="M240.237 277.391C243.505 274.282 255.807 264.387 268.654 277.352C264.865 279.282 260.13 280.257 254.496 280.257C248.861 280.257 244.098 279.296 240.237 277.391Z" fill="#D85B5B" />
                    <path id="md3" d="M229.107 261.696C229.29 263.078 229.708 265.296 230.925 267.873H277.471C278.477 265.44 278.828 263.22 278.945 261.861C276.941 262.491 272.85 263.576 266.725 264.216C258.844 265.053 245.985 265.27 229.107 261.696Z" fill="white" />
                </g>
                <!--> Paths for mouth shape E
                <!-->
                <g id="mouthE">
                    <path id="me1" fill-rule="evenodd" clip-rule="evenodd" d="M239 272.054C239 278.154 245.733 283.108 254.007 283.108C262.281 283.108 269.013 278.154 269.013 272.054C269.013 265.954 262.281 261 254.007 261C245.733 261 239 265.954 239 272.054Z" fill="black" />
                    <path id="me2" d="M242.778 275.769C246.084 273.282 254.408 268.775 265.589 275.226C263.743 278.361 259.246 280.578 254.007 280.578C249.076 280.578 244.802 278.614 242.778 275.769Z" fill="#D85B5B" />
                    <path id="me3" d="M254.007 263.529C249.499 263.529 245.54 265.171 243.347 267.627H264.666C262.474 265.171 258.515 263.529 254.007 263.529Z" fill="white" />
                </g>
                <!--> Paths for mouth shape F
                <!-->
                <g id="mouthF">
                    <path id="mf1" d="M253.799 281.975C259.211 281.975 263.598 277.727 263.598 272.487C263.598 267.248 259.211 263 253.799 263C248.387 263 244 267.248 244 272.487C244 277.727 248.387 281.975 253.799 281.975Z" fill="black" />
                    <path id="mf2" d="M256.511 279.665C260.604 279.665 263.922 276.452 263.922 272.488C263.922 268.524 260.604 265.311 256.511 265.311C252.419 265.311 249.101 268.524 249.101 272.488C249.101 276.452 252.419 279.665 256.511 279.665Z" fill="black" />
                    <path id="mf3" d="M258.835 277.484C261.687 277.484 264 275.247 264 272.487C264 269.727 261.687 267.49 258.835 267.49C255.982 267.49 253.669 269.727 253.669 272.487C253.669 275.247 255.982 277.484 258.835 277.484Z" fill="black" />
                </g>
                <!--> Paths for mouth shape G
                <!-->
                <g id="mouthG">
                    <path id="mg1" d="M235.375 266.587C234.174 266.654 233.04 266.846 232.079 267.067C230.323 265.398 229.486 263.779 229.105 262.773H278.839C278.498 263.853 277.667 265.709 275.644 267.547C275.455 267.721 275.259 267.889 275.057 268.053C271.617 267.115 267.461 267.856 266.383 268.073C264.638 266.937 262.394 266.43 259.725 266.587C256.798 266.753 254.277 267.667 253.658 267.898C252.042 266.882 250.002 266.439 247.601 266.587C244.738 266.762 242.282 267.722 241.793 267.925C240.084 266.901 237.924 266.439 235.375 266.587Z" fill="white" />
                    <path id="mg2" d="M235.375 266.587C234.174 266.654 233.04 266.846 232.079 267.067C230.323 265.398 229.486 263.779 229.105 262.773H278.839C278.498 263.853 277.667 265.709 275.644 267.547C275.455 267.721 275.259 267.889 275.057 268.053C271.617 267.115 267.461 267.856 266.383 268.073C264.637 266.937 262.394 266.43 259.725 266.587C256.798 266.753 254.277 267.667 253.658 267.898C252.042 266.882 250.002 266.439 247.601 266.587C244.738 266.762 242.282 267.722 241.793 267.925C240.084 266.901 237.924 266.439 235.375 266.587Z" fill="white" />
                    <path id="mg3" fill-rule="evenodd" clip-rule="evenodd" d="M227.055 262.006L226.908 261H280.908L280.834 261.96C280.833 261.964 280.833 261.97 280.832 261.978C280.797 262.273 280.418 265.519 276.965 268.747C276.95 268.761 276.935 268.775 276.92 268.789C277.567 269.143 278.148 269.593 278.627 270.16C278.941 270.529 278.904 271.083 278.553 271.407C278.387 271.554 278.193 271.628 277.99 271.628C277.75 271.628 277.51 271.527 277.343 271.324C275.469 269.107 270.926 269.19 268.1 269.578C268.571 270.123 268.987 270.733 269.328 271.416C269.55 271.859 269.374 272.385 268.94 272.607C268.811 272.672 268.682 272.699 268.543 272.699C268.22 272.699 267.906 272.515 267.749 272.21C265.025 266.799 257.952 268.387 255.256 269.227C255.828 269.855 256.318 270.585 256.715 271.416C256.927 271.859 256.761 272.385 256.345 272.607C256.225 272.672 256.096 272.699 255.967 272.699C255.662 272.699 255.367 272.515 255.219 272.21C252.643 266.845 246.022 268.359 243.418 269.209C244.027 269.837 244.554 270.576 244.978 271.416C245.2 271.859 245.025 272.385 244.591 272.607C244.461 272.672 244.332 272.699 244.194 272.699C243.87 272.699 243.556 272.515 243.399 272.21C240.02 265.497 229.946 269.551 229.844 269.597C229.392 269.781 228.874 269.569 228.69 269.117C228.505 268.664 228.718 268.147 229.17 267.962C229.208 267.943 229.558 267.799 230.134 267.609C227.471 264.741 227.072 262.132 227.055 262.006ZM232.079 267.067C233.04 266.846 234.174 266.654 235.375 266.587C237.924 266.439 240.084 266.9 241.793 267.925C242.282 267.722 244.738 266.762 247.601 266.587C250.002 266.439 252.042 266.882 253.658 267.898C254.277 267.667 256.798 266.753 259.725 266.587C262.394 266.43 264.637 266.937 266.383 268.073C267.461 267.856 271.617 267.115 275.057 268.053C275.259 267.889 275.455 267.721 275.644 267.547C277.667 265.709 278.498 263.853 278.839 262.773H229.105C229.486 263.779 230.323 265.398 232.079 267.067Z" fill="black" />
                </g>
                <!--> Paths for mouth shape H
                <!-->
                <g id="mouthH">
                    <path id="mh1" fill-rule="evenodd" clip-rule="evenodd" d="M230.574 271.384C236.337 280.36 246.77 282.24 254.496 282.24C263.575 282.24 270.526 279.803 275.154 275.01C281.217 268.73 281 260.756 280.99 260.415L280.938 259L279.637 259.527C279.635 259.527 279.624 259.531 279.604 259.539C279.176 259.698 274.624 261.395 266.426 262.254C258.493 263.08 245.427 263.276 228.219 259.475L227 259.207L227.01 260.456C227.011 260.462 227.011 260.471 227.011 260.484C227.028 260.956 227.212 266.141 230.574 271.384Z" fill="black" />
                    <path id="mh2" d="M240.237 277.391C243.505 274.282 255.807 264.387 268.654 277.352C264.865 279.282 260.13 280.257 254.496 280.257C248.861 280.257 244.098 279.296 240.237 277.391Z" fill="#D85B5B" />
                    <path id="mh3" d="M229.107 261.696C229.29 263.078 229.708 265.296 230.925 267.873H277.471C278.477 265.44 278.828 263.22 278.945 261.861C276.941 262.491 272.85 263.576 266.725 264.216C258.844 265.053 245.985 265.27 229.107 261.696Z" fill="white" />
                </g>
                <!--> Paths for mouth shape X
                <!-->
                <g id="mouthX">
                    <path id="mx1" d="M279 261H229V262.627H279V261Z" fill="black" />
                    <path id="mx2" d="M279 261H229V262.627H279V261Z" fill="black" />
                    <path id="mx3" d="M279 261H229V262.627H279V261Z" fill="black" />
                </g>
                <defs>
                    <clipPath id="clip0">
                        <rect width="54" height="6" fill="white" transform="translate(227 259)" />
                    </clipPath>
                </defs>
            </svg>
        </h1>
        <!-- <video ref="video_lo" muted id="local-video" autoplay></video>
            <video ref="video_re" id="remote-video" autoplay></video> -->
        <video ref="video_screen" id="remote-video" autoplay></video>
    </div>
</template>
<script>
import io from 'socket.io-client';
import TimelineMax from '../Tween.js';
import { gsap } from "gsap";


var socket = io.connect("http://localhost:5000/lips");

//const WebSocket = require('ws');
//var W3CWebSocket = require('websocket').w3cwebsocket;
//const webSocket = new W3CWebSocket("ws://127.0.0.1:3002");
const webSocketCall = new WebSocket("ws://127.0.0.1:3002");
const webSocketScreen = new WebSocket("ws://127.0.0.1:3002");

let localStream
let peerCall
let peerScreen
const child_id = 'Childish'
const screen_id = 'screen'
export default {
    name: 'Child',
    props: {
        msg: String
    },

    methods: {
        start_session(){
            this.sendDataCall({type: "store_user"}, "Childish");
            this.sendDataScreen({type: "store_user"}, "screen");
            setTimeout(() => { this.screenShare() }, 2000);
            setTimeout(() => { this.startCall() }, 1000);
        },
        screenShare() {
            navigator.mediaDevices.getDisplayMedia().then(stream => {
                // this.$refs.video_screen.srcObject = stream;
                console.log(stream)
                localStream = stream
                // this.$refs.video_lo.srcObject = stream;
                let configuration = {
                    iceServers: [{
                        "urls": ["stun:stun.l.google.com:19302",
                            "stun:stun1.l.google.com:19302"
                        ]
                    }]
                }

                peerScreen = new RTCPeerConnection(configuration)
                peerScreen.addStream(stream)
                console.log(peerScreen)
                peerScreen.onaddstream = (e) => {

                    // this.$refs.video_re.srcObject = e.stream;

                }

                peerScreen.onicecandidate = ((e) => {
                    if (e.candidate == null)
                        return
                    console.log("store_candidate")
                    console.log(e.candidate);
                    this.sendDataScreen({
                        type: "store_candidate",
                        candidate: e.candidate
                    }, screen_id)
                })
                console.log("erfan")

                this.createAndSendOfferScreen(screen_id);
            }, (error) => {
                console.log(error)
            })
        },

        handleSignallingScreen(data) {
            switch (data.type) {
                case "answer":
                    console.log("answer")
                    peerScreen.setRemoteDescription(data.answer)
                    break
                case "candidate":
                    console.log("candidate")
                    peerScreen.addIceCandidate(data.candidate)
            }
        },

        createAndSendOfferScreen(id) {
            peerScreen.createOffer((offer) => {
                console.log("salar");
                console.log(offer);
                console.log("salar");

                this.sendDataScreen({
                    type: "store_offer",
                    offer: offer
                }, id)
                peerScreen.setLocalDescription(offer)
            }, (error) => {
                console.log(error)
            })
        },

        sendDataScreen(data, id) {
            console.log(data);
            data.username = id;
            webSocketScreen.send(JSON.stringify(data));
        },


        startCall() {
            navigator.mediaDevices.getUserMedia({
                audio: false,
                video: true,
            }).then(stream => {
                console.log(stream)
                localStream = stream

                // this.$refs.video_lo.srcObject = stream;

                let configuration = {
                    iceServers: [{
                        "urls": ["stun:stun.l.google.com:19302",
                            "stun:stun1.l.google.com:19302"
                        ]
                    }]
                }

                peerCall = new RTCPeerConnection(configuration)
                peerCall.addStream(stream)
                console.log(peerCall)
                peerCall.onaddstream = (e) => {

                    // this.$refs.video_re.srcObject = e.stream;

                }

                peerCall.onicecandidate = ((e) => {
                    if (e.candidate == null)
                        return
                    console.log("store_candidate")
                    console.log(e.candidate);
                    this.sendDataCall({
                        type: "store_candidate",
                        candidate: e.candidate
                    }, child_id)
                })
                console.log("erfan")

                this.createAndSendOfferCall(child_id);
            }, (error) => {
                console.log(error)
            })
        },

        handleSignallingCall(data) {
            switch (data.type) {
                case "answer":
                    console.log("answer")
                    peerCall.setRemoteDescription(data.answer)
                    break
                case "candidate":
                    console.log("candidate")
                    peerCall.addIceCandidate(data.candidate)
            }
        },

        createAndSendOfferCall(id) {
            peerCall.createOffer((offer) => {
                console.log("salar");
                console.log(offer);
                console.log("salar");

                this.sendDataCall({
                    type: "store_offer",
                    offer: offer
                }, id)
                peerCall.setLocalDescription(offer)
            }, (error) => {
                console.log(error)
            })
        },

        sendDataCall(data, id) {
            console.log(data);
            data.username = id;
            webSocketCall.send(JSON.stringify(data));
        },

        // Recreation of emotion on Emoty (complete emotion mouth and eyes)
        emotion_recreation(emotion) {
            switch (emotion) {
                case 'Neutral':
                    this.emotion_neutral();
                    this.emotion_neutral_mouth();
                    break;
                case 'Anger':
                    this.emotion_angry();
                    this.emotion_angry_mouth();
                    break;

                case 'Surprised':
                    this.emotion_surprised();
                    this.emotion_surprised_mouth();
                    break;

                case 'Sad':
                    this.emotion_sad();
                    this.emotion_sad_mouth();
                    break;

                case 'Happy':
                    this.emotion_happy();
                    this.emotion_happy_mouth();
                    break;

                case 'Fear':
                    this.emotion_afraid();
                    this.emotion_afraid_mouth();
                    break;

                case 'Disgust':
                    this.emotion_disgust();
                    this.emotion_disgust_mouth();
                    break;

                default:
                    this.emotion_neutral();
                    this.emotion_neutral_mouth();
                    break;
            };
        },

        // Recreation of emotion with lip sync
        emotion_recreation_lipsync(emotion) {
            switch (emotion) {
                case 'Neutral':
                    this.emotion_neutral();
                    break;
                case 'Anger':
                    this.emotion_angry();
                    break;
                case 'Surprised':
                    this.emotion_surprised();
                    break;
                case 'Sad':
                    this.emotion_sad();
                    break;
                case 'Happy':
                    this.emotion_happy();
                    break;
                case 'Fear':
                    this.emotion_afraid();
                    break;
                case 'Disgust':
                    this.emotion_disgust();
                    break;

                default:
                    this.emotion_neutral();
                    break;
            };
        },




        emotion_neutral() {
            const tl = new TimelineLite();
            tl
                .add("neutral", "+=0.55")
                .to("#nero", 0.3, { morphSVG: "#nero" }, "neutral")
                .to("#neri", 0.3, { morphSVG: "#neri" }, "neutral")
                .to("#nelo", 0.3, { morphSVG: "#nelo" }, "neutral")
                .to("#neli", 0.3, { morphSVG: "#neli" }, "neutral")
            //.to("#neTear", 0.3, {morphSVG:"#neTear"},"neutral")

        },

        emotion_neutral_mouth() {
            const tl = new TimelineLite();
            tl
                .add("neutral", "+=0.55")

                .to("#nem1", 0.3, { morphSVG: "#nem1", fill: "black" }, "neutral")
                .to("#nem2", 0.3, { morphSVG: "#nem2", fill: "black" }, "neutral")
                .to("#nem3", 0.3, { morphSVG: "#nem3", fill: "black" }, "neutral")
        },

        emotion_angry() {
            const tl = new TimelineLite();
            tl
                .add("angry", "+=0.55")
                .to("#nero", 0.3, { morphSVG: "#aero" }, "angry")
                .to("#neri", 0.3, { morphSVG: "#aeri" }, "angry")
                .to("#nelo", 0.3, { morphSVG: "#aelo" }, "angry")
                .to("#neli", 0.3, { morphSVG: "#aeli" }, "angry")
        },

        emotion_angry_mouth() {
            const tl = new TimelineLite();
            tl
                .add("angry", "+=0.55")
                .to("#nem1", 0.3, { morphSVG: "#anm1", fill: "black" }, "angry")
                .to("#nem2", 0.3, { morphSVG: "#anm2", fill: "black" }, "angry")
                .to("#nem3", 0.3, { morphSVG: "#anm3", fill: "black" }, "angry")
        },

        emotion_surprised() {
            const tl = new TimelineLite();
            tl
                .add("surprised", "+=0.55")
                .to("#nero", 0.3, { morphSVG: "#sero" }, "surprised")
                .to("#neri", 0.3, { morphSVG: "#seri" }, "surprised")
                .to("#nelo", 0.3, { morphSVG: "#selo" }, "surprised")
                .to("#neli", 0.3, { morphSVG: "#seli" }, "surprised")

        },

        emotion_surprised_mouth() {
            const tl = new TimelineLite();
            tl
                .add("surprised", "+=0.55")
                .to("#nem1", 0.3, { morphSVG: "#sum1", fill: "black" }, "surprised")
                .to("#nem2", 0.3, { morphSVG: "#sum2", fill: "black" }, "surprised")
                .to("#nem3", 0.3, { morphSVG: "#sum3", fill: "white" }, "surprised")
        },

        emotion_sad() {
            const tl = new TimelineLite();
            tl
                .add("sad", "+=0.55")
                .to("#nero", 0.3, { morphSVG: "#saero" }, "sad")
                .to("#neri", 0.3, { morphSVG: "#saeri" }, "sad")
                .to("#nelo", 0.3, { morphSVG: "#saelo" }, "sad")
                .to("#neli", 0.3, { morphSVG: "#saeli" }, "sad")

                .to("#neTear", 0.3, { morphSVG: "#sadTear", fill: "white" }, "sad")

        },

        emotion_sad_mouth() {
            const tl = new TimelineLite();
            tl
                .add("sad", "+=0.55")
                .to("#nem1", 0.3, { morphSVG: "#sm1", fill: "black" }, "sad")
                .to("#nem2", 0.3, { morphSVG: "#sm2", fill: "black" }, "sad")
                .to("#nem3", 0.3, { morphSVG: "#sm3", fill: "black" }, "sad")
        },

        emotion_happy() {
            const tl = new TimelineLite();
            tl
                .add("happy", "+=0.55")
                .to("#nero", 0.3, { morphSVG: "#hero" }, "happy")
                .to("#neri", 0.3, { morphSVG: "#heri" }, "happy")
                .to("#nelo", 0.3, { morphSVG: "#helo" }, "happy")
                .to("#neli", 0.3, { morphSVG: "#heli" }, "happy")
        },

        emotion_happy_mouth() {
            const tl = new TimelineLite();
            tl
                .add("happy", "+=0.55")
                .to("#nem1", 0.3, { morphSVG: "#hm1", fill: "black" }, "happy")
                .to("#nem2", 0.3, { morphSVG: "#hm2", fill: "white" }, "happy")
                .to("#nem3", 0.3, { morphSVG: "#hm3", fill: "#D85B5B" }, "happy")
        },

        emotion_afraid() {
            const tl = new TimelineLite();
            tl
                .add("afraid", "+=0.55")
                .to("#nero", 0.3, { morphSVG: "#afero" }, "afraid")
                .to("#neri", 0.3, { morphSVG: "#aferi" }, "afraid")
                .to("#nelo", 0.3, { morphSVG: "#afelo" }, "afraid")
                .to("#neli", 0.3, { morphSVG: "#afeli" }, "afraid")
        },
        emotion_afraid_mouth() {
            const tl = new TimelineLite();
            tl
                .add("afraid", "+=0.55")
                .to("#nem1", 0.3, { morphSVG: "#afm1", fill: "black" }, "afraid")
                .to("#nem2", 0.3, { morphSVG: "#afm2", fill: "black" }, "afraid")
                .to("#nem3", 0.3, { morphSVG: "#afm3", fill: "white" }, "afraid")
        },

        emotion_disgust() {
            const tl = new TimelineLite();
            tl
                .add("disgust", "+=0.55")
                .to("#nero", 0.3, { morphSVG: "#diero" }, "disgust")
                .to("#neri", 0.3, { morphSVG: "#dieri" }, "disgust")
                .to("#nelo", 0.3, { morphSVG: "#dielo" }, "disgust")
                .to("#neli", 0.3, { morphSVG: "#dieli" }, "disgust")
        },

        emotion_disgust_mouth() {
            const tl = new TimelineLite();
            tl
                .add("disgust", "+=0.55")
                .to("#nem1", 0.3, { morphSVG: "#dim1", fill: "black" }, "disgust")
                .to("#nem2", 0.3, { morphSVG: "#dim2", fill: "white" }, "disgust")
                .to("#nem3", 0.3, { morphSVG: "#dim3", fill: "#D85B5B" }, "disgust")
        },

        mouth_a() {
            const tl = new TimelineLite();
            tl
                .add("mouth_a", "+=0.01")
                .to("#nem1", 0.0, { morphSVG: "#ma1", fill: "black" }, "mouth_a")
                .to("#nem2", 0.0, { morphSVG: "#ma2", fill: "black" }, "mouth_a")
                .to("#nem3", 0.0, { morphSVG: "#ma3", fill: "black" }, "mouth_a")
        },

        mouth_b() {
            const tl = new TimelineLite();
            tl
                .add("mouth_b", "+=0.01")
                .to("#nem1", 0.0, { morphSVG: "#mb1", fill: "black" }, "mouth_b")
                .to("#nem2", 0.0, { morphSVG: "#mb2", fill: "white" }, "mouth_b")
                .to("#nem3", 0.0, { morphSVG: "#mb3", fill: "white" }, "mouth_b")
        },
        mouth_c() {
            const tl = new TimelineLite();
            tl
                .add("mouth_c", "+=0.01")
                .to("#nem1", 0.0, { morphSVG: "#mc1", fill: "black" }, "mouth_c")
                .to("#nem2", 0.0, { morphSVG: "#mc2", fill: "white" }, "mouth_c")
                .to("#nem3", 0.0, { morphSVG: "#mc3", fill: "white" }, "mouth_c")
        },
        mouth_d() {
            const tl = new TimelineLite();
            tl
                .add("mouth_d", "+=0.01")
                .to("#nem1", 0.0, { morphSVG: "#md1", fill: "black" }, "mouth_d")
                .to("#nem2", 0.0, { morphSVG: "#md2", fill: "#D85B5B" }, "mouth_d")
                .to("#nem3", 0.0, { morphSVG: "#md3", fill: "white" }, "mouth_d")
        },
        mouth_e() {
            const tl = new TimelineLite();
            tl
                .add("mouth_e", "+=0.01")
                .to("#nem1", 0.0, { morphSVG: "#me1", fill: "black" }, "mouth_e")
                .to("#nem2", 0.0, { morphSVG: "#me2", fill: "#D85B5B" }, "mouth_e")
                .to("#nem3", 0.0, { morphSVG: "#me3", fill: "white" }, "mouth_e")
        },
        mouth_f() {
            const tl = new TimelineLite();
            tl
                .add("mouth_f", "+=0.01")
                .to("#nem1", 0.0, { morphSVG: "#mf1", fill: "black" }, "mouth_f")
                .to("#nem2", 0.0, { morphSVG: "#mf2", fill: "black" }, "mouth_f")
                .to("#nem3", 0.0, { morphSVG: "#mf3", fill: "black" }, "mouth_f")
        },

        mouth_g() {
            const tl = new TimelineLite();
            tl
                .add("mouth_g", "+=0.01")
                .to("#nem1", 0.0, { morphSVG: "#mg1", fill: "black" }, "mouth_g")
                .to("#nem2", 0.0, { morphSVG: "#mg2", fill: "white" }, "mouth_g")
                .to("#nem3", 0.0, { morphSVG: "#mg3", fill: "black" }, "mouth_g")
        },

        mouth_h() {
            const tl = new TimelineLite();
            tl
                .add("mouth_h", "+=0.01")
                .to("#nem1", 0.0, { morphSVG: "#mh1", fill: "black" }, "mouth_h")
                .to("#nem2", 0.0, { morphSVG: "#mh2", fill: "#D85B5B" }, "mouth_h")
                .to("#nem3", 0.0, { morphSVG: "#mh3", fill: "white" }, "mouth_h")
        },

        mouth_x() {
            const tl = new TimelineLite();
            tl
                .add("mouth_f", "+=0.01")
                .to("#nem1", 0.0, { morphSVG: "#mx1", fill: "black" }, "mouth_x")
                .to("#nem2", 0.0, { morphSVG: "#mx2", fill: "black" }, "mouth_x")
                .to("#nem3", 0.0, { morphSVG: "#mx3", fill: "black" }, "mouth_x")
        },


        syncAudioText() {
            var audioPlayer = document.getElementById("audiofile");
            var subtitles = document.getElementById("subtitles");
            var syncData = this.mouthCues;
            var shape = '';

            audioPlayer.addEventListener("timeupdate", (e) => {
                syncData.forEach((element, index, array) => {
                    if (audioPlayer.currentTime >= element.start && audioPlayer.currentTime <= element.end)
                        shape = element.value;
                    if (shape == 'A') {
                        this.mouth_a();
                    } else if (shape == 'B') {
                        this.mouth_b();
                    } else if (shape == 'C') {
                        this.mouth_c();
                    } else if (shape == 'D') {
                        this.mouth_d();
                    } else if (shape == 'E') {
                        this.mouth_e();
                    } else if (shape == 'F') {
                        this.mouth_f();
                    } else if (shape == 'G') {
                        this.mouth_g();
                    } else if (shape == 'H') {
                        this.mouth_h();
                    } else if (shape == 'X') {
                        this.mouth_x();
                    } else {
                        this.mouth_a();
                    }
                });
            });
            this.emotion_neutral_mouth();
            this.emotion_neutral();
        },


        wakeup_server_to_send_data() {
            socket.emit('send_file', 'hiii!!');
            console.log("hihihi");

        },

    },

    mounted() {

        webSocketCall.onmessage = (event) => {
            this.handleSignallingCall(JSON.parse(event.data))
        };

        webSocketScreen.onmessage = (event) => {
            this.handleSignallingScreen(JSON.parse(event.data))
        };

        let anime = document.createElement('script')
        anime.setAttribute('src', 'https://bot.takinweb.com/download/js/anime.js')
        document.head.appendChild(anime)

        socket.on('send_json', msg => {
            var response = JSON.parse(msg);
            this.metadata = response.metadata;
            this.mouthCues = response.mouthCues;
        });

        socket.on('send_audio', msg => {
            const blob = new Blob([msg], { type: "audio/wav" });
            this.linkAudio = window.URL.createObjectURL(blob);
            this.syncAudioText();

        });

        // Emote emotion(eyes) and lip sync
        socket.on('send_emotion', emotion => {
            this.emotion_recreation_lipsync(emotion)
        });

        // Emote the full body emotion recearion
        socket.on('full_emotion_recreation', emotion => {
            this.emotion_recreation(emotion)
        });
    },

    data() {
        return {
            mouthCues: null,
            metadata: null,
            linkAudio: null,
            timer: '',

        }
    },
    created() {
        socket.on('connect', function() {
            socket.emit('send_file', { data: 'connected!!!!!!!!!!!' });
        });

        this.wakeup_server_to_send_data();
        this.timer = setInterval(this.wakeup_server_to_send_data, 3000)

    },
}
</script>
<style scoped>
.circle {
    width: 70vh;
    height: 70vh;
    background: white;
    border-radius: 50%;
    margin: 0px auto;
}


#aelo,
#aeli,
#aero,
#aeri,
#anm1,
#anm2,
#anm3 {
    visibility: hidden;
    opacity: 0;
}

#selo,
#seli,
#sero,
#seri,
#sum1,
#sum2,
#sum3 {
    visibility: hidden;
    opacity: 0;
}

#helo,
#heli,
#hero,
#heri,
#hm1,
#hm2,
#hm3 {
    visibility: hidden;
    opacity: 0;
}

#afero,
#aferi,
#afelo,
#afeli,
#afm1,
#afm2,
#afm3 {
    visibility: hidden;
    opacity: 0;
}

#diero,
#dieri,
#dielo,
#dieli,
#dim1,
#dim2,
#dim3 {
    visibility: hidden;
    opacity: 0;
}

#sadTear {
    visibility: hidden;
    opacity: 0;
}

#saelo,
#saeli,
#saero,
#saeri,
#sm1,
#sm2,
#sm3 {
    visibility: hidden;
    opacity: 0;
}

#ma1,
#ma2,
#ma3 {
    visibility: hidden;
    opacity: 0;
}

#mb1,
#mb2,
#mb3 {
    visibility: hidden;
    opacity: 0;
}

#mc1,
#mc2,
#mc3 {
    visibility: hidden;
    opacity: 0;
}

#md1,
#md2,
#md3 {
    visibility: hidden;
    opacity: 0;
}

#me1,
#me2,
#me3 {
    visibility: hidden;
    opacity: 0;
}

#mf1,
#mf2,
#mf3 {
    visibility: hidden;
    opacity: 0;
}

#mg1,
#mg2,
#mg3 {
    visibility: hidden;
    opacity: 0;
}

#mh1,
#mh2,
#mh3 {
    visibility: hidden;
    opacity: 0;
}

#mx1,
#mx2,
#mx3 {
    visibility: hidden;
    opacity: 0;
}

#controls {
    width: 100%;
    padding: 20px 0;
    position: absolute;
    left: 0;
    z-index: 102;
}

button {
    /*padding: 16px 30px;*/
    cursor: pointer;
    font-family: 'Source Sans Pro', sans-serif;
    font-weight: 700;
    font-size: 30px;
}

#titleBox {
    width: 100%;
    padding: 20px 0;
    /*background: #262626;*/
    color: white;
    text-align: center;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 101;
}

h1,
p {
    font-family: 'Source Sans Pro', sans-serif;
    font-weight: 700;
    margin: 0;
    padding: 0;
    line-height: 1.2;
}

h1 {
    font-size: 2.5em;
}

h1,
p span {
    color: #88ce02;
}

a {
    color: #fff;
}

audio {
    visibility: hidden;
    opacity: 0;
    width: 0;
    height: 0;
}
</style>
